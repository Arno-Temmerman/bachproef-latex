\chapter{Blockchain-toepassingen voor ERP}
\label{ch:blockchain-toepassingen-voor-erp}

In dit hoofdstuk wordt de brug geslagen tussen de voorgaande twee deelvragen. 
Met een gefundeerde basiskennis in zowel blockcchain als erp 
Dit hoofdstuk representeert de zoektocht naar die blockchain-technologieën die een bruikbare toepassing lijken te bieden hebben binnen een ERP-context.


Op die manier behandelt dit hoofdstuk de derde deelvraag van het onderzoek:
\begin{center}
	\textit{\textbf{``Welke mogelijkheden biedt blockchain voor een ERP-systeem?''}}
\end{center}

Om die mogelijkheden te vinden vertok ik vanuit Gartner Hype Cycle uit sectie 1.2 verantwoording. 2 toepassingen die aantrekkelijk leken op basis van maturiteit.

Eerst en vooral is het belangrijk om te snappen dat er verschillende varianten van blockchains bestaan. De ene is meer geschikt voor ERP dan de andere.

Daarna is het belangrijk om te weten er ook scripts/programmatuur kan gebracht worden op een blockchain. Dit noemen we smart contracts. Hoewel deze op het eerste zicht rechtstreeks handig leken voor een erp, is het in dit onderzoek de stap geweest naar de toepassing die gekozen werd voor deelvraag 4.
Smart contracts maken namelijk NFT mogelijk. Dit gaan we gebruiken in deelvraag 4.
Om de overstap naar volgend hoofdstuk te maken is het belangrijk om te beseffen dat allerlei data in blockchains kan opgeslagen worden. Hiervoor wordt een beeld geschept van NFT's.

\section{Blockchain-platformen}

De originele Bitcoin whitepaper inspireerde talloze spelers om een eigen versie van een blokchain te ontwikkelen. Ondertussen brachten al verschillende ondernemingen hun eigen variant op de markt. Om deze implementaties van elkaar te onderscheiden spreekt men over verschillende ``blockchain-platformen''. Elk platform biedt een basis aan ontwikkelaars om nieuwe toepassingen te bouwen op de bestaande blokchain-infrastructuur
~\autocite{Saraf2018}.

\begin{table}[H]
	\begin{tabular}{@{}lccc@{}}
		\cmidrule(l){2-4}
		& \textbf{Ethereum}                                         & \textbf{Hyperledger} & \textbf{R3 Corda}                                        \\ \midrule
		1. Type                                                                     & Openbaar                                                  & Besloten             & Besloten                                                 \\ \midrule
		2. Consensus algoritme                                                      & Proof of Work                                             & Pluggable Framework  & Pluggable Framework                                      \\ \midrule
		3. Toepassingsgebied                                                        & Algemeen                                                  & Algemeen             & Financiële sector                                        \\ \midrule
		\begin{tabular}[c]{@{}l@{}}4. Ondersteunde\\  programmeertalen\end{tabular} & \begin{tabular}[c]{@{}c@{}}Python\\ Go\\ C++\end{tabular} & Python               & \begin{tabular}[c]{@{}c@{}}C++\\ Javascript\end{tabular} \\ \bottomrule
	\end{tabular}
	\caption{\label{tab:blockchain-platformen}Vergelijking van drie fundamentele blockchain platformen}
\end{table}

Een eerste manier waarop platformen zich van elkaar onderscheiden is dus de machinetaal waarin ze geïmplementeerd zijn.
Tabel~\ref{tab:blockchain-platformen} vergelijkt drie fundamentele blockchain-platformen met elkaar op nog een aantal andere vlakken.

\begin{enumerate}
	\item Een platform kan openbaar of besloten zijn. Indien men geen permissies nodig heeft om peer-to-peernetwerk te betreden, wordt het openbaar beschouwd. In het andere geval is het systeem besloten. Eens een node opgevangen is in het netwerk, kan het de blockchain in beide op een transparante manier inkijken.
	\item Niet elk platform gebruikt de Proof of Work, zoals beschreven in sectie \ref{sub:proof-of-work} - \nameref{sub:proof-of-work}. Er zijn ook andere manieren om consensus na te streven. Het opzet blijft dus hetzelfde.
	\item Verschillende platformen mikken op een ander toepassingsgebied.
	\item Naast de taal waarin de blockchain geïmplementeerd is, zijn er ook programmeertalen waarmee het platform benaderd kan worden. Hiermee kunnen ontwikkelaars toepassingen schrijven die de onderliggende blockchain kunnen benutten. 
\end{enumerate}
	
Deze drie voorbeelden werden opgenomen in de tabel, omdat ze in zekere zin een basis vormen van vele andere platformen. Heel wat producenten brachten een eigen platform op de markt dat eigenlijk een afgeleide is van reeds bestaande keuze. In de literatuur wordt vaak geen onderscheid gemaakt tussen de twee~\autocite{Gartner2022}. Enkele voorbeelden van commerciële blockchainplatformen zijn:
\begin{itemize}
	\item Ethereum
	\item Hyperledger Fabric
	\item Hyperledger Sawtooth
	\item Hyperledger Iroha
	\item IBM Blockchain
	\item Microsoft Azure Blockchain
	\item ...
\end{itemize}

\subsection{Hard forks}

Zoals reeds vermeld, kunnen blockchain-platformen de basis vormen voor nieuwe varianten. Wanneer er ingrijpende aanpassingen gemaakt worden aan het protocol van een basis-blockchain, spreekt men over een hard fork. Door uiteenlopende visies kunnen op die manier verschillende ``smaken'' van eenzelfde blockchain ontstaan. Wanneer men over de Bitcoin-blockchain spreekt, heeft men het doorgaans over de originele BTC-fork. Nochtans is dit niet de enige. Sinds het ontstaan werd er steeds verder getweakt aan de implementatie. Omdat informatici een eigen visie hadden over hoe de keten stabiel gemaakt kon worden, ontstonden ook forks zoals BSV (Blockchain Satoshi Vision). In die vertakking probeerde men zoveel mogelijk terug te keren op het oorspronkelijk protocol. Verschillende ontwerpkeuzes zorgen ervoor dat de ene fork meer schaalbaarheid of rekenkracht kan bieden dan de andere. Als gevolg zijn bepaalde forks meer of minder geschikt voor het opslaan van data in een ERP-context.

\section{Smart contracts}

Een smart contract is een stuk computercode dat geïmplementeerd wordt bovenop een blockchain als digitale versie van een contract. Ze maken het mogelijk om contractuele voorwaarden automatisch af te dwingen, zonder de tussenkomst van een derde partij~\autocite{Salem2008}.

De voorwaarden en bijhorende gevolgen van het contract, worden omgezet naar verzameling van functies en variabelen in het smart contract. Wanneer transacties in de blockchain terecht komen die een van deze voorwaarden triggert, wordt de bijhorende functie uitgevoerd. De uitvoer wordt op zijn beurt opgenomen in de blockchain als een nieuwe transactie in de blockchain~\autocite{Zheng2019}. In volgende subsecties worden de verschillende stappen in de levenscyclus van een smart contract uitgelegd. Figuur~\ref{fig:smart-contracts-overview} geeft een mooie leidraad weer.

\subsection{Creatie}

In een eerste fase leggen de betrokken partijen de voorwaarden van het contract vast in gewone mensentaal. Eens opgesteld, kan een software engineer de (voorwaarden van) dit contract omzetten in code. Dit is mogelijk in verschillende high-level programmeertalen, zoals Python, Java of Solidity~\autocite{Bahga2016}. Een compiler zet deze statements om naar een smart contract onder de vorm machinecode, dat klaar is om in de blockchain gezet te worden~\autocite{Zheng2019}.

\textbf{Voorbeeld:}
Partijen A en B sluiten een contract: indien een metaaldetector iets aantreft in de voedselverwerking van partij A, moet partij B hiervoor beboet worden. Een software engineer krijgt de opdracht om dit contract om te zetten in code.

\subsection{Deployment}

Eens een contract wordt weggeschreven naar de blockchain, kan het niet meer gewijzigd worden. Zoals al aangegeven, zijn de voorwaarden van het conract vertaald naar functies en variabelen. Indien men een nieuwe voorwaarde wenst toe te voegen aan het contract, zal men een nieuw smart contract moeten aanmaken. Dankzij de transparantie van de blockchain kunnen alle partijen het contract raadplegen~\autocite{Zheng2019}.

\textbf{Voorbeeld:}
Het smart contract tussen partij A en B wordt op de blockchain geplaatst.

\subsection{Uitvoering}

Tijdens de uitvoering wordt voortdurend gemonitord of er nieuwe transacties op de blockchain geplaatst worden die de voorwaarden van het contract vervullen. Wanneer een functie getriggerd word zal deze de voorgeprogrammeerde implicaties uitvoeren als een nieuwe transactie in de blockchain. Met andere woorden: het contract werd afgedwongen, zonder actieve tussenkomst van een derde partij~\autocite{Delmolino2016}.

\textbf{Voorbeeld:}
De metaaldetector van partij A merkt een onzuiverheid op in het productieproces. Deze detectie wordt onder de vorm van een transactie opgeslagen op de blockchain. Dit triggert het smart contract dat op zijn beurt een transactie op de keten plaatst om aan om deze gebeurtenis te documenteren.

\subsection{Afronding}

Om de levenscyclus van een smart contract af te ronden, worde de betrokken partijen op de hoogte gebracht. De status van de partijen wordt geüpdatet indien nodig~\autocite{Zheng2019}.

\textbf{Voorbeeld:}
Partijen A en B worden op de hoogte gebracht. Partij B maakt het nodige bedrag over naar partij A, wat wordt geregistreerd als een transactie op de blockchain.

\begin{figure}[H]
	\centering
	\includegraphics[width=\linewidth]{img/blockchain-for-erp/smart-contracts-overview.pdf}
	\caption{\label{fig:smart-contracts-overview}Overzicht smart contracts~\autocite{Zheng2019}}
\end{figure}

\section{NFT's}

Zoals vermeld in subsectie 3.1.2, stond een transactie oorspronkelijk voor de bitcoin-overdracht van een partij naar een andere~\autocite{Pierro2017}. Bij elke transactie worden digitale tokens uitgewisseld die door de ontvangende partij opnieuw uitgegeven kunnen worden. Op geen enkel punt is het daarbij zinvol om een onderscheid te maken tussen individuele tokens. Ze zijn namelijk onderling gelijkwaardig. Zo komt een Bitcoin wallet aan zijn saldo lauter door het aantal bitcoins waaruit die bestaat. Het is daarbij niet van belang wélke bitcoin-tokens dat specifiek zijn. In die zin zijn de tokens van Blockchain 1.0 fungibel of vervangbaar.

Met de overgang naar Blockchain 2.0 wordt op dit vlak een conceptuele sprong gemaakt. Met de komst van nieuwe blockchain-platformen werd het namelijk mogelijk om meer dan enkel bitcoin-overdrachten op te slaan. De datavelden van nieuwere blockchains staan open voor allerlei data. Men kan nu ook bestanden zoals een afbeelding, factuur of tekstbestand vastleggen in een blockchain en behandelen als een token. Deze tokens kunnen nog steeds uitgewisseld worden, maar hebben nu wel een unieke waarde. Immers, de ene factuur is de andere niet. Ze zijn dus niet fungibel en krijgen daarom de naam Non-fungible token of NFT.

Een diepgaande technische uiteenzetting van NFT's is niet opportuun voor deze scriptie. Aangezien deze tokens wel hun nut bewijzen in een ERP-context, is het echter wel belangrijk om een gegrond beeld te krijgen van wat ze juist zijn.

\subsection{Voorbeeld}

Op digitale markplaatsen zoals OpenSea kan men de inhoud en details van allerlei NFT's verkennen. Deze bevinden zich op een blockchain zoals die van Ethereum. Heel wat grafische kunstwerkjes worden op die manier ``als NFT'' te koop aangeboden. Onderstaand voorbeeld illustreert wat dat juist inhoudt.

Figuur~\ref{fig:nft-example} geeft een willekeurige NFT uit de Ethereum blockchain weer, zoals die te vinden valt op digitale markplaatsen. De data die in dit geval als token op de blockchain geplaatst werd, is een PNG-afbeelding van cirkels en lijnstukken. Het is belangrijk om erop te wijzen dat dit geen afbeelding hoeft te zijn. Ook andere bestanden, zoals een XML-factuur of een mp3. In de details wordt verwezen naar het smart contract waarmee deze token gemaakt werd, alsook de ID dat eraan gegeven werd.

Deze NFT werd gemaakt met behulp van een smart contract. Het adres hiervan gegeven en een unieke ID dat dit contract maakte

\begin{figure}[H]
	\centering
	\includegraphics[width=\linewidth]{img/blockchain-for-erp/nft-example.pdf}
	\caption{\label{fig:nft-example}NFT op een digitale marktplaats}
\end{figure}

Het smart contract adres wijst naar een plaats op de Ethereum blockchain. Een eenvoudige manier om de bijhorende data te benaderen, is met behulp van een block explorer website zoals EtherScan. Wie het adres volgt, zal het script (of smart contract) vinden dat gebruikt werd om de afbeelding, samen met allerlei metadata op de blockchain te plaatsen. Met andere woorden: het werd gebruikt om de afbeelding ``als NFT'' op de blockchain te plaatsen. Hiervoor heeft het script allerlei commando's. Nog een ander commando dient om de URI van een token op te vragen op basis van zijn ID:
\begin{figure}[H]
	\centering
	\includegraphics[width=\linewidth]{img/blockchain-for-erp/tokenURI-function.pdf}
\end{figure}
Met de ID van de NFT uit Figuur~\ref{fig:nft-example} als parameter, zal dit commando kunnen we de bijhorende URI retourneren.

\begin{figure}[H]
	\centering
	\includegraphics[width=0.5\linewidth]{img/blockchain-for-erp/nft-tokenURI.pdf}
	\caption{\label{fig:nft-tokenURI}URI van een NFT}
\end{figure}

Merk op dat de token URI in dit geval zelfs een URL is. Deze kan dus via elke webbrowser benaderd worden. Het is trouwens ook mogelijk om dit adres als QR-code voor te stellen. Door deze verwijzing te volgen, krijgt men de data van de NFT~\footnote{Voor de duidelijkheid werd een deel van de metadata uit dit voorbeeld vervangen door beletseltekens.}:

\begin{figure}[H]
	\centering
	\includegraphics[width=\linewidth]{img/blockchain-for-erp/NFT-data.pdf}
\end{figure}

De NFT bestaat uit metadata zoals \verb|tokenID|, \verb*|payout_address| en \verb|minted|. Met \verb*|image| wordt de URI-verwijzing naar de PNG-afbeelding van cirkels vastgelegd. Het geheel is wat ``de NFT van'' de afbeelding inhoudt. 
Wat het betekent om een NFT van een bestand te minten kan dus eenvoudig beschreven worden: men plaatst -met behulp van een smart contract- een URI-verwijzing naar dat bestand, samen met metadata op de blockchain. Die data geniet vanaf dan alle voordelen van een blockchain: het is \textit{incorruptible} en kan herleid worden naar een zekere eigenaar.
